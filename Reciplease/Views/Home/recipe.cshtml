@model Reciplease.Models.HomeContent

@{
	ViewBag.Title = "Recipe";
}
<h2>@ViewBag.Title</h2>
@*<head> already on layout page
	<title>Reciplease</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="css/style.css">
</head>*@
<!-- Page Content  -->
<div id="content" class="p-4 p-md-5 pt-5">
	<div class="recipe-card">
		<link rel="stylesheet" href="css/style2.css">

		<!--maybe use js to call this? -->
		@if ( Model.User.IsAuthenticated )
		{
			if ( Model.User.IsAFavorite( Model.SingleRecipe.id ) )
			{
				<input type="button" class="btn-dark" id="togglefavorite" onclick="toggle()" value="UnFavorite" />
			}
			else
			{
				<input type="button" class="btn-dark" id="togglefavorite" onclick="toggle()" value="Favorite" />
			}
		}
		<!---Display Recipe--->
		<article>

			<h2>@Model.SingleRecipe.title</h2>
			<p>Ready in : @Model.SingleRecipe.readyInMinutes minutes</p>
			<p>Servings : @Model.SingleRecipe.servings </p>
			<p>@Model.SingleRecipe.image</p>
			<ol>
				@foreach ( String instruction in @Model.SingleRecipe.SplitInstructions( ) )
				{
					<li>@instruction</li>
				}
			</ol>
			<p>@Model.SingleRecipe.cuisines</p>
			<p>@Model.SingleRecipe.diets</p>
			<p>@Model.SingleRecipe.dishTypes</p>
			<p>@Model.SingleRecipe.GetFractionizedIngredients( )</p>
			<p>@Model.SingleRecipe.nutrition</p>

		</article>
		<!---End Display Recipe--->

		<br>
		<!---Rating System--->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<style>
			.checked {
				color: orange;
			}
		</style>
		<p><b>Difficulty</b></p>
		<span class="fa fa-star checked"></span>
		<span class="fa fa-star checked"></span>
		<span class="fa fa-star checked"></span>
		<span class="fa fa-star"></span>
		<span class="fa fa-star"></span>
		<!---- --->



		<br>

	</div>
</div>
<div id="snackbar">Some text some message..</div>
<script src="js/jquery.min.js"></script>
<script src="js/popper.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/main.js"></script>
<script>
	function toggle() {
		/**/
	$.ajax({
        type: "POST",
        url: '@Url.Action( "ToggleFavorite", "Home", new { id = Model.SingleRecipe.id } )',
		async: true,
        success: function (msg) {
			
			if (msg.responseText == 0) {
				$("#togglefavorite").prop("value", "UnFavorite");
				var x = document.getElementById("snackbar");

				// Add the "show" class to DIV
				x.className = "show";

				x.textContent = "Recipe Favorited"

				// After 3 seconds, remove the show class from DIV
				setTimeout(function () { x.className = x.className.replace("show", ""); }, 3000);
			}
			else if (msg.responseText == 1) {
				$("#togglefavorite").prop("value", "Favorite");
				var x = document.getElementById("snackbar");

				// Add the "show" class to DIV
				x.className = "show";

				x.textContent = "Recipe UnFavorited"

				// After 3 seconds, remove the show class from DIV
				setTimeout(function () { x.className = x.className.replace("show", ""); }, 3000);
			}
			
        },
        error: function () {
            alert("Error toggling the favorite. Please contact developers.")
        }
    });
	/**/

}
</script>